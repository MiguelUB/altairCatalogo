<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vega-Altair Graphic</title>
    <!-- Incluye Vega y Vega-Lite desde CDN -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
</head>
<body>
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6">
            <!-- Primer div: Selector -->
            <div class="form-group">
                <label for="selector">Scheme selector:</label>
                <select class="form-control" id="selector" aria-labelledby="selectorLabel">
                    <option value="option1">Default</option>
                    <option value="option2">category20b</option>
                    <option value="option3">viridis</option>
                </select>

                <label for="selector">Scheme selector:</label>
                <select class="form-control" id="selector2" aria-labelledby="selectorLabel">
                    <option value="option1">200</option>
                    <option value="option2">500</option>
                    <option value="option3">800</option>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div id="chart"></div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <p>Layered charts are still not supported</p>
            </div>
        </div>
    </div>
    <!-- Div para mostrar el gr�fico -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script>
        // Especifica tu especificaci�n de Vega-Lite
        var spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.15.1.json",
            "config": {
                "arc": {"stroke": "#FFFFFF", "strokeWidth": 1},
                "axis": {
                    "domain": true,
                    "domainColor": "#000F3A",
                    "grid": true,
                    "gridCap": "round",
                    "gridColor": "#FFFFFF",
                    "gridDash": [1, 2],
                    "gridWidth": 0.5,
                    "labelColor": "#FFFFFF",
                    "labelFont": "Roboto, Arial, sans-serif",
                    "labelPadding": 2,
                    "tickColor": "#000F3A",
                    "tickOpacity": 1.0,
                    "tickSize": 4,
                    "ticks": true,
                    "titleColor": "#FFFFFF",
                    "titleFont": "Roboto, Arial, sans-serif",
                    "titleFontSize": 15
                },
                "background": "#333333",
                "bar": {"fill": "#4C88EE", "stroke": "#FFFFFF"},
                "header": {
                    "labelColor": "#FFFFFF",
                    "labelFont": "Roboto, Arial, sans-serif",
                    "labelFontSize": 15,
                    "titleColor": "#FFFFFF",
                    "titleFont": "Roboto, Arial, sans-serif",
                    "titleFontSize": 19
                },
                "legend": {
                    "labelColor": "#FFFFFF",
                    "labelFont": "Roboto, Arial, sans-serif",
                    "labelFontSize": 15,
                    "symbolSize": 40,
                    "titleColor": "#FFFFFF",
                    "titleFont": "Roboto, Arial, sans-serif",
                    "titleFontSize": 15,
                    "titlePadding": 4
                },
                "line": {"stroke": "#4C88EE", "strokeWidth": 2},
                "path": {"stroke": "#4C88EE", "strokeWidth": 0.5},
                "point": {"fill": "#4C88EE", "filled": true, "shape": "circle"},
                "range": {
                    "category": ["#82ACF3", "#148636", "#77B98A", "#148636", "#E58686"],
                    "diverging": ["#5C3A8C", "#148636", "#00A39E", "#6BCAC7", "#FFE796", "#E58686", "#dc267f", "#701240"],
                    "heatmap": ["#811D1D", "#942121", "#D32F2F", "#DA5252", "#E58686", "#EDAAAA", "#FBEAEA"],
                    "ramp": ["#811D1D", "#942121", "#D32F2F", "#DA5252", "#E58686", "#EDAAAA", "#FBEAEA"]
                },
                "rect": {"fill": "#4C88EE"},
                "rule": {"stroke": "#4C88EE"},
                "shape": {"stroke": "#4C88EE"},
                "text": {"color": "#FFFFFF", "font": "Roboto, Arial, sans-serif", "fontSize": 15},
                "title": {
                    "anchor": "start",
                    "color": "#FFFFFF",
                    "font": "Roboto, Arial, sans-serif",
                    "fontSize": 23,
                    "fontWeight": "bold",
                    "offset": 20,
                    "subtitleColor": "#FFFFFF",
                    "subtitleFontSize": 19
                },
                "view": {"continuousHeight": 300, "continuousWidth": 400, "stroke": "tan"}
            },
            "data": {"name": "data-bb61008ba0c766c5601afa5323d12ad4"},
            "datasets": {
                "data-bb61008ba0c766c5601afa5323d12ad4": [{
                    "net_generation": 35361,
                    "source": "Fossil Fuels",
                    "year": "2001-01-01T00:00:00"
                }, {
                    "net_generation": 35991,
                    "source": "Fossil Fuels",
                    "year": "2002-01-01T00:00:00"
                }, {
                    "net_generation": 36234,
                    "source": "Fossil Fuels",
                    "year": "2003-01-01T00:00:00"
                }, {
                    "net_generation": 36205,
                    "source": "Fossil Fuels",
                    "year": "2004-01-01T00:00:00"
                }, {
                    "net_generation": 36883,
                    "source": "Fossil Fuels",
                    "year": "2005-01-01T00:00:00"
                }, {
                    "net_generation": 37014,
                    "source": "Fossil Fuels",
                    "year": "2006-01-01T00:00:00"
                }, {
                    "net_generation": 41389,
                    "source": "Fossil Fuels",
                    "year": "2007-01-01T00:00:00"
                }, {
                    "net_generation": 42734,
                    "source": "Fossil Fuels",
                    "year": "2008-01-01T00:00:00"
                }, {
                    "net_generation": 38620,
                    "source": "Fossil Fuels",
                    "year": "2009-01-01T00:00:00"
                }, {
                    "net_generation": 42750,
                    "source": "Fossil Fuels",
                    "year": "2010-01-01T00:00:00"
                }, {
                    "net_generation": 39361,
                    "source": "Fossil Fuels",
                    "year": "2011-01-01T00:00:00"
                }, {
                    "net_generation": 37379,
                    "source": "Fossil Fuels",
                    "year": "2012-01-01T00:00:00"
                }, {
                    "net_generation": 34873,
                    "source": "Fossil Fuels",
                    "year": "2013-01-01T00:00:00"
                }, {
                    "net_generation": 35250,
                    "source": "Fossil Fuels",
                    "year": "2014-01-01T00:00:00"
                }, {
                    "net_generation": 32319,
                    "source": "Fossil Fuels",
                    "year": "2015-01-01T00:00:00"
                }, {
                    "net_generation": 28437,
                    "source": "Fossil Fuels",
                    "year": "2016-01-01T00:00:00"
                }, {
                    "net_generation": 29329,
                    "source": "Fossil Fuels",
                    "year": "2017-01-01T00:00:00"
                }, {
                    "net_generation": 3853,
                    "source": "Nuclear Energy",
                    "year": "2001-01-01T00:00:00"
                }, {
                    "net_generation": 4574,
                    "source": "Nuclear Energy",
                    "year": "2002-01-01T00:00:00"
                }, {
                    "net_generation": 3988,
                    "source": "Nuclear Energy",
                    "year": "2003-01-01T00:00:00"
                }, {
                    "net_generation": 4929,
                    "source": "Nuclear Energy",
                    "year": "2004-01-01T00:00:00"
                }, {
                    "net_generation": 4538,
                    "source": "Nuclear Energy",
                    "year": "2005-01-01T00:00:00"
                }, {
                    "net_generation": 5095,
                    "source": "Nuclear Energy",
                    "year": "2006-01-01T00:00:00"
                }, {
                    "net_generation": 4519,
                    "source": "Nuclear Energy",
                    "year": "2007-01-01T00:00:00"
                }, {
                    "net_generation": 5282,
                    "source": "Nuclear Energy",
                    "year": "2008-01-01T00:00:00"
                }, {
                    "net_generation": 4679,
                    "source": "Nuclear Energy",
                    "year": "2009-01-01T00:00:00"
                }, {
                    "net_generation": 4451,
                    "source": "Nuclear Energy",
                    "year": "2010-01-01T00:00:00"
                }, {
                    "net_generation": 5215,
                    "source": "Nuclear Energy",
                    "year": "2011-01-01T00:00:00"
                }, {
                    "net_generation": 4347,
                    "source": "Nuclear Energy",
                    "year": "2012-01-01T00:00:00"
                }, {
                    "net_generation": 5321,
                    "source": "Nuclear Energy",
                    "year": "2013-01-01T00:00:00"
                }, {
                    "net_generation": 4152,
                    "source": "Nuclear Energy",
                    "year": "2014-01-01T00:00:00"
                }, {
                    "net_generation": 5243,
                    "source": "Nuclear Energy",
                    "year": "2015-01-01T00:00:00"
                }, {
                    "net_generation": 4703,
                    "source": "Nuclear Energy",
                    "year": "2016-01-01T00:00:00"
                }, {
                    "net_generation": 5214,
                    "source": "Nuclear Energy",
                    "year": "2017-01-01T00:00:00"
                }, {
                    "net_generation": 1437,
                    "source": "Renewables",
                    "year": "2001-01-01T00:00:00"
                }, {
                    "net_generation": 1963,
                    "source": "Renewables",
                    "year": "2002-01-01T00:00:00"
                }, {
                    "net_generation": 1885,
                    "source": "Renewables",
                    "year": "2003-01-01T00:00:00"
                }, {
                    "net_generation": 2102,
                    "source": "Renewables",
                    "year": "2004-01-01T00:00:00"
                }, {
                    "net_generation": 2724,
                    "source": "Renewables",
                    "year": "2005-01-01T00:00:00"
                }, {
                    "net_generation": 3364,
                    "source": "Renewables",
                    "year": "2006-01-01T00:00:00"
                }, {
                    "net_generation": 3870,
                    "source": "Renewables",
                    "year": "2007-01-01T00:00:00"
                }, {
                    "net_generation": 5070,
                    "source": "Renewables",
                    "year": "2008-01-01T00:00:00"
                }, {
                    "net_generation": 8560,
                    "source": "Renewables",
                    "year": "2009-01-01T00:00:00"
                }, {
                    "net_generation": 10308,
                    "source": "Renewables",
                    "year": "2010-01-01T00:00:00"
                }, {
                    "net_generation": 11795,
                    "source": "Renewables",
                    "year": "2011-01-01T00:00:00"
                }, {
                    "net_generation": 14949,
                    "source": "Renewables",
                    "year": "2012-01-01T00:00:00"
                }, {
                    "net_generation": 16476,
                    "source": "Renewables",
                    "year": "2013-01-01T00:00:00"
                }, {
                    "net_generation": 17452,
                    "source": "Renewables",
                    "year": "2014-01-01T00:00:00"
                }, {
                    "net_generation": 19091,
                    "source": "Renewables",
                    "year": "2015-01-01T00:00:00"
                }, {
                    "net_generation": 21241,
                    "source": "Renewables",
                    "year": "2016-01-01T00:00:00"
                }, {"net_generation": 21933, "source": "Renewables", "year": "2017-01-01T00:00:00"}]
            },
            "encoding": {
                "color": {"field": "source", "type": "nominal"},
                "x": {"field": "year", "type": "temporal"},
                "y": {"field": "net_generation", "type": "quantitative"}
            },
            "mark": {"type": "area"}
        };
        var defaultScheme = spec.encoding.color.hasOwnProperty('scale') ? spec.encoding.color.scale :
            spec.description = "Esta es una simple descripcion"
        var embedOpt = {"mode": "vega-lite"};

        function showError(el, error) {
            el.innerHTML = ('<div style="color:red;">'
                + '<p>JavaScript Error: ' + error.message + '</p>'
                + "<p>This usually means there's a typo in your chart specification. "
                + "See the javascript console for the full traceback.</p>"
                + '</div>');
            throw error;
        }

        const el = document.getElementById('chart');

        $(document).ready(function () {
            // Manejar el cambio en el selector
            $('#selector').change(function () {
                // Obtener el valor seleccionado
                var opcionSeleccionada = $(this).val();
                console.log(opcionSeleccionada)

                // Realizar acciones seg�n el valor seleccionado
                switch (opcionSeleccionada) {
                    case 'option1':
                        // Acciones para la opci�n 1
                        spec.encoding.color.scale = defaultScheme
                        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                        break;
                    case 'option2':
                        // Acciones para la opci�n 2
                        spec.encoding.color.scale = {"scheme": "category20b"}
                        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                        break;
                    case 'option3':
                        // Acciones para la opci�n 3
                        spec.encoding.color.scale = {"scheme": "viridis"}
                        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                        break;
                    default:
                        // Acciones por defecto
                        $('#graficoContainer').html('<p>Contenido por defecto</p>');
                        break;
                }
            });
        });
        $(document).ready(function () {
            // Manejar el cambio en el selector
            $('#selector2').change(function () {
                // Obtener el valor seleccionado
                var opcionSeleccionada = $(this).val();
                console.log(opcionSeleccionada)

                // Realizar acciones seg�n el valor seleccionado
                switch (opcionSeleccionada) {
                    case 'option1':
                        // Acciones para la opci�n 1
                        spec.height = 200
                        spec.width = 200
                        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                        break;
                    case 'option2':
                        // Acciones para la opci�n 2
                        spec.height = 500
                        spec.width = 500
                        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                        break;
                    case 'option3':
                        spec.height = 800
                        spec.width = 800
                        console.log("Hola3")
                        spec.encoding.color.scale = {"scheme": "viridis"}
                        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));
                        break;
                    default:
                        // Acciones por defecto
                        $('#graficoContainer').html('<p>Contenido por defecto</p>');
                        break;
                }
            });
        });
        vegaEmbed("#chart", spec, embedOpt).catch(error => showError(el, error));

    </script>
</body>
</html>
